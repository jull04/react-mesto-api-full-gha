{"ast":null,"code":"import CurrentUserContext from\"../contexts/CurrentUserContext\";import useFormValidation from\"../hooks/useFormValidation\";import PopupWithForm from\"./PopupWithForm\";import React,{useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditProfilePopup(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,onUpdateUser=_ref.onUpdateUser,isLoading=_ref.isLoading;var currentUser=React.useContext(CurrentUserContext);var _useFormValidation=useFormValidation(),handleChange=_useFormValidation.handleChange,values=_useFormValidation.values,errors=_useFormValidation.errors,isValid=_useFormValidation.isValid,isInputValid=_useFormValidation.isInputValid,reset=_useFormValidation.reset,setValue=_useFormValidation.setValue;useEffect(function(){setValue(\"firstname\",currentUser.name);setValue(\"job\",currentUser.about);},[currentUser,setValue]);useEffect(function(){reset({firstname:currentUser.name,job:currentUser.about});},[isOpen]);function handleSubmit(evt){evt.preventDefault();onUpdateUser({firstname:values.firstname,job:values.job});}return/*#__PURE__*/_jsxs(PopupWithForm,{name:\"edit\",title:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",btnText:isLoading?\"Сохранение...\":\"Сохранить\",isOpen:isOpen,onClose:onClose,isValid:isValid,onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{id:\"name\",name:\"firstname\",className:\"popup__input popup__input_type_name \".concat(isInputValid.firstname===undefined||isInputValid.firstname?'':'popup__input_type_error'),type:\"text\",placeholder:\"\\u0418\\u043C\\u044F\",minLength:2,maxLength:40,required:true,onChange:handleChange,value:values.firstname?values.firstname:''}),/*#__PURE__*/_jsx(\"span\",{className:\"name-error popup__error popup__error_visible\",children:errors.firstname}),/*#__PURE__*/_jsx(\"input\",{id:\"job\",className:\"popup__input popup__input_type_job\\\" \".concat(isInputValid.job===undefined||isInputValid.job?'':'popup__input_type_error'),type:\"text\",name:\"job\",placeholder:\"\\u041E \\u0441\\u0435\\u0431\\u0435\",minLength:2,maxLength:200,required:true,onChange:handleChange,value:values.job?values.job:''}),/*#__PURE__*/_jsx(\"span\",{className:\"job-error popup__error popup__error_visible\",children:errors.job})]});}export default EditProfilePopup;","map":{"version":3,"names":["CurrentUserContext","useFormValidation","PopupWithForm","React","useEffect","jsx","_jsx","jsxs","_jsxs","EditProfilePopup","_ref","isOpen","onClose","onUpdateUser","isLoading","currentUser","useContext","_useFormValidation","handleChange","values","errors","isValid","isInputValid","reset","setValue","name","about","firstname","job","handleSubmit","evt","preventDefault","title","btnText","onSubmit","children","id","className","concat","undefined","type","placeholder","minLength","maxLength","required","onChange","value"],"sources":["/Users/juliakh/Desktop/react-mesto-auth/react-mesto-auth/src/components/EditProfilePopup.jsx"],"sourcesContent":["import CurrentUserContext from \"../contexts/CurrentUserContext\";\nimport useFormValidation from \"../hooks/useFormValidation\";\nimport PopupWithForm from \"./PopupWithForm\"\nimport React, {useEffect} from \"react\";\n\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser, isLoading}) {\n\n  const currentUser = React.useContext(CurrentUserContext);  \n\n  const {handleChange, values, errors, isValid, isInputValid, reset, setValue} = useFormValidation();\n\n  useEffect(() => {\n    setValue(\"firstname\", currentUser.name)\n    setValue(\"job\", currentUser.about)\n  },[currentUser, setValue])\n\n  useEffect(() => {\n    reset({firstname: currentUser.name, job: currentUser.about})\n  }, [isOpen]);\n\n  function handleSubmit(evt){\n    evt.preventDefault();\n    onUpdateUser({firstname: values.firstname, job: values.job}) \n  }\n\n  return (\n    <PopupWithForm\n      name=\"edit\"\n      title=\"Редактировать профиль\"\n      btnText={isLoading ? \"Сохранение...\" : \"Сохранить\"}\n      isOpen={isOpen}\n      onClose={onClose}\n      isValid={isValid}\n      onSubmit={handleSubmit}\n    >\n      <input\n        id=\"name\"\n        name=\"firstname\"\n        className={`popup__input popup__input_type_name ${isInputValid.firstname === undefined || isInputValid.firstname ? '' : 'popup__input_type_error' }`}\n        type=\"text\"\n        placeholder=\"Имя\"\n        minLength={2}\n        maxLength={40}\n        required\n        onChange={handleChange}\n        value={values.firstname ? values.firstname : ''}\n      />\n      <span className=\"name-error popup__error popup__error_visible\">{errors.firstname}</span>\n      <input\n        id=\"job\"\n        className={`popup__input popup__input_type_job\" ${isInputValid.job === undefined || isInputValid.job ? '' : 'popup__input_type_error' }`}\n        type=\"text\"\n        name=\"job\"\n        placeholder=\"О себе\"\n        minLength={2}\n        maxLength={200}\n        required\n        onChange={handleChange}\n        value={values.job ? values.job : ''}\n      />\n      <span className=\"job-error popup__error popup__error_visible\">{errors.job}</span>\n    </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}